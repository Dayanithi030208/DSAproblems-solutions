import java.util.*;


class ListNode {
    int val;
    ListNode next;
    ListNode prev;

    ListNode(int val) {
        this.val = val;
        this.next = null;
        this.prev = null;
    }
}


public class FindPairsWithTarget {

    // TODO: Implement your logic here
    public List<List<Integer>> findPairsWithGivenSum(ListNode head, int target) {

        // ------------ WRITE YOUR LOGIC HERE ------------
        if(head==null||head.next==null) return new ArrayList<>();
        List<List<Integer>> Ans=new ArrayList<>();
        ListNode temp=head;
        Set<Integer> set=new HashSet<>();
        while(temp!=null){
            int data=temp.val;
            if(set.contains(target-data)){
                Ans.add(Arrays.asList(target-data,data));
            }
            set.add(data);
            temp=temp.next;
        }
        Collections.sort(Ans,(a,b)->a.get(0)-b.get(0));
        return Ans;
    }

    // Utility: Create DLL from array
    public static ListNode createDLL(int[] arr) {
        if (arr.length == 0) return null;

        ListNode head = new ListNode(arr[0]);
        ListNode temp = head;

        for (int i = 1; i < arr.length; i++) {
            ListNode newNode = new ListNode(arr[i]);
            temp.next = newNode;
            newNode.prev = temp;
            temp = newNode;
        }
        return head;
    }
    // Utility: Print DLL
    public static void printDLL(ListNode head) {
        ListNode temp = head;
        while (temp != null) {
            System.out.print(temp.val);
            if (temp.next != null) System.out.print(" <-> ");
            temp = temp.next;
        }
        System.out.println();
    }

    public static void main(String[] args) {

        // Example test cases

        int[] arr1 = {1, 2, 3, 4, 5, 6};
        ListNode head1 = createDLL(arr1);
        FindPairsWithTarget ob = new FindPairsWithTarget();

        System.out.println("DLL:");
        printDLL(head1);

        System.out.println("Pairs with sum 7:");
        List<List<Integer>> ans = ob.findPairsWithGivenSum(head1, 7);
        System.out.println(ans);

        int[] arr2 = {2, 3, 3, 4, 5};
        ListNode head2 = createDLL(arr2);

        System.out.println("\nDLL:");
        printDLL(head2);

        System.out.println("Pairs with sum 6:");
        System.out.println(ob.findPairsWithGivenSum(head2, 6));
    }
}
